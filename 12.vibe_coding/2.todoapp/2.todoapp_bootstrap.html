<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‚˜ë§Œì˜ ë°ì¼ë¦¬ ëŒ€ì‹œë³´ë“œ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CSS -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
    <!-- Bootstrap Icons -->
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    >

    <style>
        /* ì „ì²´ ë°°ê²½ì€ ê·¸ëŒ€ë¡œ ë‹¤í¬ + ê·¸ë¼ë°ì´ì…˜ ìœ ì§€ */
        body {
            min-height: 100vh;
            background: radial-gradient(circle at top, #2f80ed 0, #1c1f2b 40%, #0b0c10 100%);
            color: #111827; /* ê¸°ë³¸ ê¸€ìëŠ” ì§„í•œ ìƒ‰ */
        }

        .dashboard-wrapper {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 15px;
        }

        /* ìœ ë¦¬ ëŠë‚Œ ì¹´ë“œ â†’ ë°ì€ ì¹´ë“œ + ì§„í•œ ê¸€ì */
        .glass-card {
            background: rgba(248, 250, 252, 0.96);  /* ê±°ì˜ í°ìƒ‰ */
            border-radius: 20px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            backdrop-filter: blur(8px);
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(148, 163, 184, 0.4);
            color: #0f172a; /* ì¹´ë“œ ì•ˆ ê¸€ì ìƒ‰ */
        }

        .badge-gradient {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            color: #000;
        }

        .todo-item.completed .todo-title {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .todo-item {
            transition: transform 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
            cursor: pointer;
        }
        .todo-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.18);
            background-color: rgba(249, 250, 251, 0.9);
        }

        .todo-title {
            color: #111827; /* íˆ¬ë‘ í…ìŠ¤íŠ¸ ì§„í•˜ê²Œ */
        }

        /* ë©”ëª¨ ì˜ì—­ì„ ë°ê²Œ */
        #focusNote {
            background: #ffffff;
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.8);
            color: #111827;
        }

        /* ì„¤ëª… í…ìŠ¤íŠ¸ */
        .tiny-label {
            font-size: 0.8rem;
            color: #6b7280;
        }

        #noteStatus {
            color: #6b7280;
        }

        /* ì…ë ¥ì°½/ì…€ë ‰íŠ¸ë„ ë°ê²Œ */
        .form-control.bg-dark,
        .form-select.bg-dark {
            background-color: #ffffff !important;
            color: #111827 !important;
        }

        /* ëª¨ë°”ì¼ì—ì„œ ì—¬ë°± ì¡°ê¸ˆ ì¤„ì´ê¸° */
        @media (max-width: 576px) {
            .dashboard-wrapper {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
<div class="dashboard-wrapper">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="glass-card p-4 p-md-5">
                    <!-- í—¤ë” ì˜ì—­ -->
                    <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
                        <div>
                            <h2 class="fw-bold mb-1">
                                <i class="bi bi-stars me-2 text-warning"></i>
                                ë°ì¼ë¦¬ í¬ì»¤ìŠ¤ ëŒ€ì‹œë³´ë“œ
                            </h2>
                            <div class="tiny-label">
                                ì˜¤ëŠ˜ í•  ì¼ê³¼ ì§‘ì¤‘í•  ë‚´ìš©ì„ í•œ ê³³ì—ì„œ ì •ë¦¬í•´ ë³´ì„¸ìš” âœï¸
                            </div>
                        </div>
                        <div class="text-end mt-3 mt-md-0">
                            <span class="badge badge-gradient rounded-pill px-3 py-2">
                                <i class="bi bi-lightning-charge-fill me-1"></i>
                                <span id="todayText"></span>
                            </span>
                        </div>
                    </div>

                    <div class="row g-4">
                        <!-- ì™¼ìª½: íˆ¬ë‘ ë¦¬ìŠ¤íŠ¸ -->
                        <div class="col-md-7">
                            <div class="mb-3 d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="bi bi-check2-square me-2 text-info"></i>
                                    ì˜¤ëŠ˜ì˜ í•  ì¼
                                </h5>
                                <button class="btn btn-sm btn-outline-danger" id="clearAll">
                                    <i class="bi bi-trash3 me-1"></i>ì „ì²´ ì‚­ì œ
                                </button>
                            </div>

                            <!-- í•  ì¼ ì¶”ê°€ í¼ -->
                            <form id="todoForm" class="row g-2 mb-3">
                                <div class="col-12 col-sm-7">
                                    <input
                                        type="text"
                                        id="todoInput"
                                        class="form-control form-control-sm bg-dark text-light border-secondary"
                                        placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..."
                                        required
                                    >
                                </div>
                                <div class="col-6 col-sm-3">
                                    <select
                                        id="prioritySelect"
                                        class="form-select form-select-sm bg-dark text-light border-secondary"
                                    >
                                        <option value="normal">ë³´í†µ</option>
                                        <option value="high">ë†’ìŒ</option>
                                        <option value="low">ë‚®ìŒ</option>
                                    </select>
                                </div>
                                <div class="col-6 col-sm-2 d-grid">
                                    <button type="submit" class="btn btn-sm btn-primary">
                                        <i class="bi bi-plus-lg me-1"></i>ì¶”ê°€
                                    </button>
                                </div>
                            </form>

                            <!-- ì§„í–‰ë¥  ë°” -->
                            <div class="mb-2 tiny-label">
                                ì™„ë£Œ ì§„í–‰ë¥  <span id="progressText">0%</span>
                            </div>
                            <div class="progress mb-3" style="height: 8px;">
                                <div
                                    id="progressBar"
                                    class="progress-bar bg-success"
                                    role="progressbar"
                                    style="width: 0%;"
                                    aria-valuemin="0"
                                    aria-valuemax="100"
                                ></div>
                            </div>

                            <!-- íˆ¬ë‘ ë¦¬ìŠ¤íŠ¸ -->
                            <ul id="todoList" class="list-group list-group-flush">
                                <!-- JSì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ -->
                            </ul>

                            <div class="tiny-label mt-2">
                                íŒ: í•­ëª©ì„ í´ë¦­í•˜ë©´ ì™„ë£Œ/ì·¨ì†Œê°€ í† ê¸€ë©ë‹ˆë‹¤. ğŸ–±ï¸
                            </div>
                        </div>

                        <!-- ì˜¤ë¥¸ìª½: ì˜¤ëŠ˜ì˜ í¬ì»¤ìŠ¤ ë©”ëª¨ -->
                        <div class="col-md-5">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h5 class="mb-0">
                                    <i class="bi bi-journal-text me-2 text-warning"></i>
                                    ì˜¤ëŠ˜ì˜ í¬ì»¤ìŠ¤
                                </h5>
                                <button class="btn btn-sm btn-outline-primary" id="saveNote">
                                    <i class="bi bi-save me-1"></i>ë©”ëª¨ ì €ì¥
                                </button>
                            </div>
                            <p class="tiny-label mb-2">
                                ì˜¤ëŠ˜ ê¼­ ì§‘ì¤‘í•˜ê³  ì‹¶ì€ ë‚´ìš©, ì•„ì´ë””ì–´, íšŒì˜ ë©”ëª¨ ë“±ì„ ììœ ë¡­ê²Œ ì ì–´ë‘ì„¸ìš”.
                            </p>
                            <textarea
                                id="focusNote"
                                class="form-control"
                                rows="8"
                                placeholder="ì˜ˆ) ì˜¤ì „ì—ëŠ” ê°•ì˜ìë£Œ ì •ë¦¬, ì˜¤í›„ì—ëŠ” í”„ë¡œì íŠ¸ ì½”ë“œ ë¦¬íŒ©í† ë§..."
                            ></textarea>
                            <div class="tiny-label mt-2" id="noteStatus">
                                ì•„ì§ ì €ì¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>

                    <hr class="border-secondary my-4">

                    <!-- í‘¸í„° -->
                    <div class="d-flex flex-wrap justify-content-between align-items-center small text-secondary">
                        <div>
                            <i class="bi bi-magic me-1"></i>
                            HTML/CSS/JS + Bootstrap ë§Œìœ¼ë¡œ ë™ì‘í•˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì „ìš© ì›¹ì•±ì…ë‹ˆë‹¤.
                        </div>
                        <div class="mt-2 mt-md-0">
                            <i class="bi bi-cloud-download me-1"></i>
                            ë¸Œë¼ìš°ì € <span class="text-info">localStorage</span>ì— ìë™ ì €ì¥ë©ë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    let todos = [];
    const STORAGE_KEY_TODOS = "fancyDashboardTodos";
    const STORAGE_KEY_NOTE  = "fancyDashboardNote";

    const todayText     = document.getElementById("todayText");
    const todoForm      = document.getElementById("todoForm");
    const todoInput     = document.getElementById("todoInput");
    const prioritySelect = document.getElementById("prioritySelect");
    const todoList      = document.getElementById("todoList");
    const progressBar   = document.getElementById("progressBar");
    const progressText  = document.getElementById("progressText");
    const clearAllBtn   = document.getElementById("clearAll");

    const focusNote     = document.getElementById("focusNote");
    const saveNoteBtn   = document.getElementById("saveNote");
    const noteStatus    = document.getElementById("noteStatus");

    function setTodayText() {
        const now = new Date();
        const options = { year: "numeric", month: "short", day: "numeric", weekday: "short" };
        todayText.textContent = now.toLocaleDateString("ko-KR", options);
    }

    function loadState() {
        try {
            const savedTodos = localStorage.getItem(STORAGE_KEY_TODOS);
            const savedNote  = localStorage.getItem(STORAGE_KEY_NOTE);

            if (savedTodos) {
                todos = JSON.parse(savedTodos);
            }
            if (savedNote !== null) {
                focusNote.value = savedNote;
                noteStatus.textContent = "ë§ˆì§€ë§‰ ì €ì¥ë¨ (ë¸Œë¼ìš°ì € localStorage)";
            }
        } catch (e) {
            console.error("ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤:", e);
        }
    }

    function saveTodos() {
        localStorage.setItem(STORAGE_KEY_TODOS, JSON.stringify(todos));
    }

    function saveNote() {
        localStorage.setItem(STORAGE_KEY_NOTE, focusNote.value);
        noteStatus.textContent = "ì €ì¥ ì™„ë£Œ! (ë¸Œë¼ìš°ì € localStorage)";
    }

    function renderTodos() {
        todoList.innerHTML = "";

        if (todos.length === 0) {
            const emptyItem = document.createElement("li");
            emptyItem.className = "list-group-item bg-transparent border-0 text-secondary small";
            emptyItem.textContent = "ì•„ì§ ë“±ë¡ëœ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ìƒˆë¡œìš´ í•  ì¼ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”.";
            todoList.appendChild(emptyItem);
            updateProgress();
            return;
        }

        todos.forEach((todo) => {
            const li = document.createElement("li");
            li.className = "list-group-item d-flex align-items-center justify-content-between bg-transparent border-secondary todo-item";
            if (todo.completed) {
                li.classList.add("completed");
            }
            li.dataset.id = todo.id;

            const left = document.createElement("div");
            left.className = "d-flex align-items-center";

            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.className = "form-check-input me-2";
            checkbox.checked = todo.completed;

            const title = document.createElement("span");
            title.className = "todo-title";
            title.textContent = todo.text;

            const priorityBadge = document.createElement("span");
            priorityBadge.className = "badge ms-2";
            if (todo.priority === "high") {
                priorityBadge.classList.add("bg-danger");
                priorityBadge.textContent = "ë†’ìŒ";
            } else if (todo.priority === "low") {
                priorityBadge.classList.add("bg-secondary");
                priorityBadge.textContent = "ë‚®ìŒ";
            } else {
                priorityBadge.classList.add("bg-info");
                priorityBadge.textContent = "ë³´í†µ";
            }

            left.appendChild(checkbox);
            left.appendChild(title);
            left.appendChild(priorityBadge);

            const right = document.createElement("button");
            right.className = "btn btn-sm btn-outline-danger";
            right.innerHTML = '<i class="bi bi-x-lg"></i>';

            li.addEventListener("click", function (e) {
                if (e.target === right || right.contains(e.target)) return;
                toggleTodo(todo.id);
            });

            checkbox.addEventListener("click", function (e) {
                e.stopPropagation();
                toggleTodo(todo.id);
            });

            right.addEventListener("click", function (e) {
                e.stopPropagation();
                deleteTodo(todo.id);
            });

            li.appendChild(left);
            li.appendChild(right);
            todoList.appendChild(li);
        });

        updateProgress();
    }

    function addTodo(text, priority) {
        const newTodo = {
            id: Date.now(),
            text: text.trim(),
            priority: priority,
            completed: false
        };
        todos.unshift(newTodo);
        saveTodos();
        renderTodos();
    }

    function toggleTodo(id) {
        todos = todos.map((todo) =>
            todo.id === id
                ? { ...todo, completed: !todo.completed }
                : todo
        );
        saveTodos();
        renderTodos();
    }

    function deleteTodo(id) {
        todos = todos.filter((todo) => todo.id !== id);
        saveTodos();
        renderTodos();
    }

    function clearAllTodos() {
        if (!confirm("ì •ë§ë¡œ ëª¨ë“  í•  ì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
        todos = [];
        saveTodos();
        renderTodos();
    }

    function updateProgress() {
        const total = todos.length;
        const completed = todos.filter((t) => t.completed).length;
        const percent = total === 0 ? 0 : Math.round((completed / total) * 100);

        progressBar.style.width = percent + "%";
        progressText.textContent = percent + "%";
        progressBar.setAttribute("aria-valuenow", percent);
    }

    document.addEventListener("DOMContentLoaded", function () {
        setTodayText();
        loadState();
        renderTodos();

        todoForm.addEventListener("submit", function (e) {
            e.preventDefault();
            const text = todoInput.value.trim();
            if (!text) {
                todoInput.focus();
                return;
            }
            const priority = prioritySelect.value;
            addTodo(text, priority);
            todoInput.value = "";
            todoInput.focus();
        });

        clearAllBtn.addEventListener("click", clearAllTodos);

        saveNoteBtn.addEventListener("click", function () {
            saveNote();
        });

        focusNote.addEventListener("input", function () {
            noteStatus.textContent = "ë³€ê²½ë¨ (ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”)";
        });
    });
</script>
</body>
</html>
