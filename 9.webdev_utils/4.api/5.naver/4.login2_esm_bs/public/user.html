<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
    <div class="container mt-5" style="max-width: 600px">
        <h1 class="h4 mb-4">내 정보</h1>

        <div id="profileImg" class="mb-3"></div>

        <ul id="info" class="list-group"></ul>

        <a href="/dashboard" class="btn btn-link mt-3"> ← 대시보드로 </a>
    </div>

    <script>
        fetch('/api/user')
            .then((r) => (r.ok ? r.json() : Promise.reject()))
            .then((u) => {
                if (u.profileImage) {
                    profileImg.innerHTML = `<img src="${u.profileImage}" class="rounded" width="120">`;
                }

                info.innerHTML = `
                    <li class="list-group-item">이름: ${u.name}</li>
                    <li class="list-group-item">이메일: ${u.email}</li>
                    <li class="list-group-item">닉네임: ${u.nickname}</li>
                    <li class="list-group-item">성별: ${u.gender}</li>
                    <li class="list-group-item">생년월일: ${u.birthday}</li>
                    <li class="list-group-item">전화번호: ${u.mobile}</li>
                `;
            })
            .catch(() => (location.href = '/'));
    </script>
</body>
</html>
