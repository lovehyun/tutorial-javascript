<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Lip Sync</title>
    <style>
        #character {
            font-size: 100px;
            text-align: center;
            margin-top: 50px;
        }
        #log {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <textarea id="textInput" placeholder="í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" rows="4" cols="50"></textarea>
    <button id="speakButton">ë§í•˜ê¸°</button>
    <div id="character">ğŸ˜€</div>
    <div id="log"></div>

    <script>
        const textInput = document.getElementById('textInput');
        const speakButton = document.getElementById('speakButton');
        const character = document.getElementById('character');
        const log = document.getElementById('log');

        const lipsyncMap = {
            'ã…': 'ğŸ˜®', // ì… ë²Œë¦° ëª¨ì–‘
            'ã…‘': 'ğŸ˜®', // ì… ë²Œë¦° ëª¨ì–‘
            'ã…“': 'ğŸ˜', // ì¤‘ë¦½ ëª¨ì–‘
            'ã…•': 'ğŸ˜', // ì¤‘ë¦½ ëª¨ì–‘
            'ã…—': 'ğŸ˜¯', // ë†€ë€ ëª¨ì–‘
            'ã…›': 'ğŸ˜¯', // ë†€ë€ ëª¨ì–‘
            'ã…œ': 'ğŸ˜²', // ë†€ë€ ëª¨ì–‘
            'ã… ': 'ğŸ˜²', // ë†€ë€ ëª¨ì–‘
            'ã…¡': 'ğŸ˜', // ì¤‘ë¦½ ëª¨ì–‘
            'ã…£': 'ğŸ˜Š', // ì›ƒëŠ” ëª¨ì–‘
            'ã…”': 'ğŸ˜Š', // ì›ƒëŠ” ëª¨ì–‘
            'ã…': 'ğŸ˜Š'  // ì›ƒëŠ” ëª¨ì–‘
        };

        function getLipSyncChar(char) {
            for (let key in lipsyncMap) {
                if (char.includes(key)) {
                    return lipsyncMap[key];
                }
            }
            return 'ğŸ˜€'; // ê¸°ë³¸ ì–¼êµ´ ëª¨ì–‘
        }

        speakButton.addEventListener('click', () => {
            // ì´ì „ ë¡œê·¸ ë‚´ìš© í´ë¦¬ì–´
            log.innerHTML = '';

            const text = textInput.value;
            if (!text) return;

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ko-KR';

            utterance.onboundary = (event) => {
                if (event.name === 'word') {
                    const char = text[event.charIndex];
                    const lipSyncChar = getLipSyncChar(char);
                    character.textContent = lipSyncChar;

                    const logEntry = document.createElement('div');
                    logEntry.textContent = `í˜„ì¬ ë¬¸ì: ${char}, ì…ëª¨ì–‘ ì´ëª¨í‹°ì½˜: ${lipSyncChar}`;
                    log.appendChild(logEntry);
                }
            };

            utterance.onend = () => {
                character.textContent = 'ğŸ˜€'; // ëë‚˜ë©´ ê¸°ë³¸ ì–¼êµ´ ëª¨ì–‘ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            };

            window.speechSynthesis.speak(utterance);
        });
    </script>
</body>
</html>
